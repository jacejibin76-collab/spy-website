<!DOCTYPE html>
<html>
<head>
    <title>Shadow Directorate</title>
    <style>
        body{
            background:black;
            color:#00ff88;
            font-family:monospace;
            margin:0;
            text-align:center;
            padding-top:100px;
        }

        #intro{
            font-size:40px;
            letter-spacing:2px;
            animation:flicker 1s infinite;
        }

        @keyframes flicker{
            0%{opacity:1;}
            50%{opacity:0.6;}
            100%{opacity:1;}
        }

        #terminal{
            font-size:18px;
            margin-top:40px;
            white-space:pre-line;
        }

        .red{
            color:red;
        }

        #countdown{
            font-size:22px;
            margin-top:30px;
        }
    </style>
</head>
<body>

<div id="intro">INITIALIZING SECURE TERMINAL...</div>
<div id="terminal"></div>
<div id="countdown"></div>

<script>
const agents = {
    "PHANTOM": "Mission: Silent Extraction\nLocation: Sector 7\nStatus: Active",
    "RAVEN": "Mission: Recon Surveillance\nLocation: Grid X12\nStatus: Stealth",
    "VIPER": "Mission: Asset Retrieval\nLocation: Black Zone\nStatus: Armed",
    "GHOST": "Mission: Data Infiltration\nLocation: Deep Node\nStatus: Hidden"
};

const params = new URLSearchParams(window.location.search);
const agent = params.get("agent");

const intro = document.getElementById("intro");
const terminal = document.getElementById("terminal");
const countdown = document.getElementById("countdown");

function typeText(text, speed=40){
    let i=0;
    function typing(){
        if(i<text.length){
            terminal.innerHTML += text.charAt(i);
            i++;
            setTimeout(typing,speed);
        }
    }
    typing();
}

setTimeout(()=>{
    intro.style.display="none";

    if(agent && agents[agent.toUpperCase()]){
        const name = agent.toUpperCase();

        // Save last access locally
        localStorage.setItem("lastAgent", name);
        localStorage.setItem("lastAccess", new Date().toLocaleString());

        let output =
        "Accessing Secure Database...\n" +
        "Identity Confirmed: " + name + "\n" +
        "Clearance Level: 7\n\n" +
        agents[name] +
        "\n\nSystem Monitoring Active...\n";

        typeText(output);

        setTimeout(startCountdown, 6000);

    } else {
        terminal.innerHTML =
        "<span class='red'>UNAUTHORIZED ACCESS DETECTED</span>\n\n" +
        "Device Logged.\n" +
        "Security Alert!\n\n" +
        "TERMINAL LOCKED.";
    }
}, 2000);

function startCountdown(){
    let time = 10;
    function tick(){
        countdown.innerHTML = "Self Destruct In: " + time + "s";
        time--;
        if(time >= 0) setTimeout(tick,1000);
        else document.body.innerHTML =
        "<div style='color:red;text-align:center;margin-top:150px;font-size:30px;'>SESSION TERMINATED</div>";
    }
    tick();
}
</script>

</body>
</html>
